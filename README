Sudoku3
========================
09/06/2011 Warsaw
Start to port Sudoku from rails 2 to rails 3

Create application from the template on https://github.com/railsapps/rails3-mongoid-devise, 

rails g scaffold Puzzle level:integer name:string description:text

10/06/2011 Warsaw
Make the first cucumber of Puzzle passed

To support database migration, a change needs to be made to the file config/application.rb to disperse the error
mongoid error
create a migrate to database and rspec it
//obsolete above, mongoid is different in the database migration than ActiveRecord

follow the introduction on http://asciicasts.com/episodes/238-mongoid
change the model directly, add the validate_presence_of :name, to the model and modify spec/../puzzle_controller_spec.rb valid_attributes accordingly
then rake spec passed

So far a skeleton of BDD has been built for rails program.

17/06/2011 Warsaw
Make compass worked. Compass 0.11 branch + Rails 3.1 RC4 need a lot of hacks.

17/06/2011 Warsaw
Create model Sudokus

E:\Workspace\sudoku31>rails g model Sudoku puzzle:reference
      invoke  mongoid
      create    app/models/sudoku.rb
      invoke    rspec
      create      spec/models/sudoku_spec.rb

E:\Workspace\sudoku31>rails g controller sudokus
      create  app/controllers/sudokus_controller.rb
      invoke  haml
      create    app/views/sudokus (remove it)
      invoke  rspec
      create    spec/controllers/sudokus_controller_spec.rb
      invoke  helper
      create    app/helpers/sudokus_helper.rb
      invoke    rspec
      invoke  assets
      create    app/assets/javascripts/sudokus.js.coffee (remove it)
      invoke    scss
      create      app/assets/stylesheets/sudokus.css.scss (remove it)

23/06/2011 Prague
Started to port it rails3.1, it is very painful especially to get compass working!
Issue 1: Coffee Script to understand regular express. It is different than javascript
e.g. new RegExp("string"+"/g") works well in Javascript but in Coffee it converts it automatically to /string\/g
Don't yet how to fix it.

update
simply fixed it by set pattern.global = true (not mentioned in any document, discovered it when debuging to explore pattern)

24/06/2011 Prague
Issue1: editable cell fixed size. Fixed it by set CSS table-layout and word-wrap

29/06/2011 Prague
To do list:
1.Port create sudokus table from JS to CS 
2.Fix the ul.hmenu (fixed it by set application.css.scss)
3.Beautify the form
4.I18N

if i define newCellCSS with font {}, even I use tdNode.removeClass().addClass('newFontCSS'), it will not change the size at all
finally find out the root cause (get rid of font define inside td css) and remove css code in programe. 
the same thing to background, background-color

29/06/2011 Prague
unexpected INDENT error raised by Coffeescript compiler. check carefully for the for loop, if a new line is not the part of the for loop, there should be a blank line

03/07/2011 Warsaw
Done porting create table from JS to CS. Though I prefer to do it in the similar way done in the JS (backup/grid.sudoku), this way is simple but less straightforward.
When using jQuery to append, needs to be very careful to use the right selector $('#tbl'), otherwise no grid created by $('tbl')
To do list:
1. Port string.sudoku.js to CS
2. I18N
3. Finish all puzzles view
4. Solution to puzzles
5. JS test under cabybara

It might be better to create a help system to track all I have done for the developing. Will be funny.

04/07/2011 Warsaw
define a step for select in web_steps.rb then level (select box) now get supported in cucumber
just don't know why it has not been defined from the beginning, since it is so common?

07/07/2011 Warsaw
It likes a little bit hack to make capybara go!
Cellstring is a hidden field, to set its value I need to create a new web step "...set hidden value...", and pass the name with ugly parameter puzzle[cellstring].
tried selenium, but failed to find good document to guide me through
!!! Successfully to set validate and make cucumber & rspec passed!
JS testing still needs to be studied.
________________________

License

Copyright 2011 Qingfeng Cai All rights reserved

